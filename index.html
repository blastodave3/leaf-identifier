<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Leaf Identifier</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.4/p5.min.js"></script>
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #222; color: white; }
        canvas { border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <h2>Tree Leaf Identifier</h2>
    <div id="canvas-container"></div>

    <script>
        // --- 1. SETTINGS ---
        // REPLACE THIS with your own model link from Teachable Machine!
       let imageModelURL = 'https://teachablemachine.withgoogle.com/models/7ZyhWuPe7/';
        
        let classifier;
        let video;
        let flippedVideo;
        let label = "Loading model...";

        // --- 2. PRELOAD ---
        function preload() {
            // Load the model before the sketch starts
            classifier = ml5.imageClassifier(imageModelURL + 'model.json');
        }

        // --- 3. SETUP (Your Code) ---
        function setup() {
            let canvas = createCanvas(320, 260);
            canvas.parent('canvas-container'); // Put canvas inside the div
            
            video = createCapture(VIDEO);
            video.size(320, 240);
            video.hide();

            flippedVideo = ml5.flipImage(video);
            classifyVideo();
        }

        // --- 4. DRAW (Your Code) ---
        function draw() {
            background(0);
            image(flippedVideo, 0, 0);

            fill(255);
            textSize(16);
            textAlign(CENTER);
            text(label, width / 2, height - 10);
        }

        // --- 5. CLASSIFY (Your Code) ---
        function classifyVideo() {
            flippedVideo = ml5.flipImage(video);
            classifier.classify(flippedVideo, gotResult);
        }

        // --- 6. RESULTS (Your Code) ---
        function gotResult(error, results) {
            if (error) {
                console.error(error);
                return;
            }
            label = results[0].label;
            classifyVideo();
        }
    </script>
</body>
</html>

 
